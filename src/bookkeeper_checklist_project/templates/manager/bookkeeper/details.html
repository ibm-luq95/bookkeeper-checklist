{% extends "core/layouts/dashboard.html" %}
{% load static %}
{% load crispy_forms_tags %}

{% block externalcss %}
<link rel="stylesheet" href="{% static 'css/manager/bookkeeper/details.css' %}" />
{% endblock externalcss %}

{% block dashboard_content %}

<section id="manager-bookkeepers-details">
  <header>
    <h3 class="title is-3"></h3>
  </header>
  <hr />
  <div class="box">
    <div class="columns">
      <div class="container profile">
        <!-- Start update modal -->
        {% include 'manager/bookkeeper/segments/update_bookkeeper_modal.html' with object=object %}
        <!-- End update modal -->
        <div class="section profile-heading">
          <div class="columns is-mobile is-multiline">
            <div class="column is-2">
              <span class="header-icon user-profile-image">
                {% comment %} <img alt="" src="http://placehold.it/300x225" /> {% endcomment %}

                {% if object.profile_picture %}
                <img src="{{ object.profile_picture.url }}" alt="{{ object.user.fullname }}" />
                {% else %}
                <img src="{% static 'imgs/avatar.jpg' %}" alt="{{ object.user.fullname }}" />
                {% endif %}
              </span>
            </div>
            <div class="column is-4-tablet is-10-mobile name">
              <p>
                <span class="title is-bold">{{ object.user.fullname }}</span>
                <br />

                <br />
              </p>
              <p class="tagline">

                <a class="button is-primary is-outlined" href="#" id="edit-preferences"
                  style="margin: 5px 0">Preferences</a>

              </p>
            </div>
            <div class="column is-2-tablet is-4-mobile has-text-centered">
              <p class="stat-val">{{ object.user.jobs.count }}</p>
              <p class="stat-key">Jobs</p>
            </div>
            <div class="column is-2-tablet is-4-mobile has-text-centered">
              <p class="stat-val">{{ object.get_tasks_count }}</p>
              <p class="stat-key">Tasks</p>
            </div>
            <div class="column is-2-tablet is-4-mobile has-text-centered">
              <p class="stat-val">{{ object.clients.count }}</p>
              <p class="stat-key">Clients</p>
            </div>
          </div>
        </div>
        <div class="profile-options is-fullwidth">
          <div class="tabs is-toggle is-fullwidth" id="tabs">
            <ul>
              <li class="is-active" data-tab="1">
                <a>
                  <span class="icon is-small"><i class="fa-solid fa-briefcase"></i></span>
                  <span>Jobs</span>
                </a>
              </li>
              <li data-tab="2">
                <a>
                  <span class="icon is-small"><i class="fa-solid fa-users"></i></span>
                  <span>Clients</span>
                </a>
              </li>
              <!-- <li data-tab="3">
                                <a>
                                    <span class="icon is-small"><i class="fa-solid fa-solid fa-key"></i></span>
                                    <span>Accounts & Services</span>
                                </a>
                            </li> -->
              <li data-tab="3">
                <a>
                  <span class="icon is-small"><i class="fa-solid fa-list-check"></i></span>
                  <span>Tasks</span>
                </a>
              </li>
              <li data-tab="4">
                <a>
                  <span class="icon is-small"><i class="fa-solid fa-list-check"></i></span>
                  <span>Special Assignment</span>
                </a>
              </li>

            </ul>
          </div>
          <div id="tab-content">
            <section class="is-active" data-content="1">
                1
            </section>
            <section data-content="2">
              {% include 'components/client/table_list.html' with clients_list=object.clients.all user_type=request.user.user_type details_url="client"|add:":details:overview" action_urls_pattern="client" app_name="client" perms=perms is_show_created_at=False only %}
            </section>


            <section data-content="3">
              tasks
            </section>

            <section data-content="4">
              special assignment
            </section>

          </div>
        </div>

      </div>
    </div>

  </div>
</section>


{% endblock dashboard_content %}


{% block externaljs %}
<script src="{% static 'js/manager/bookkeeper/details.js' %}" defer type="module"></script>
{% endblock externaljs %}
